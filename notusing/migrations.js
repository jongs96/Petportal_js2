const { faker } = require('@faker-js/faker/locale/ko');
const bcrypt = require('bcryptjs');
const {
    sequelize,
    AdminUser,
    User,
    Product,
    Cafe,
    Accommodation,
    Hospital,
    Hotel,
    GroomingService,
    CommunityPost,
    CommunityComment
} = require('./database.js');

// --- Helper Functions ---
const createRandomUser = async (i) => ({
    username: faker.person.fullName(),
    email: faker.internet.email() + i,
    password: await bcrypt.hash('password123', 10),
    role: 'user',
});

const createRandomProduct = () => ({
    name: faker.commerce.productName(),
    price: faker.commerce.price({ min: 10000, max: 200000, dec: 0 }),
    description: faker.commerce.productDescription(),
    category: faker.helpers.arrayElement(['ì‚¬ë£Œ', 'ê°„ì‹', 'ì¥ë‚œê°', 'ì˜ë¥˜', 'ìœ„ìƒìš©í’ˆ']),
    stock: faker.number.int({ min: 0, max: 100 }),
    image: `/images/products/product${faker.number.int({ min: 1, max: 10 })}.jpg`,
    images: Array.from({ length: faker.number.int({ min: 2, max: 5 }) }, () => `/images/products/product${faker.number.int({ min: 1, max: 10 })}.jpg`),
});

const createRandomAccommodation = () => ({
    name: `${faker.location.city()} ${faker.helpers.arrayElement(['í« í”„ë Œë“¤ë¦¬', 'ê°•ì•„ì§€', 'ê³ ì–‘ì´'])} íœì…˜`,
    type: faker.helpers.arrayElement(['íœì…˜', 'ë¦¬ì¡°íŠ¸', 'í’€ë¹Œë¼']),
    location: `${faker.location.state()} ${faker.location.city()}`,
    price: faker.commerce.price({ min: 150000, max: 500000, dec: 0 }),
    description: faker.lorem.paragraph(),
    rating: faker.number.float({ min: 3.5, max: 5.0, precision: 0.1 }),
    image: `/images/pensions/pension${faker.number.int({ min: 1, max: 10 })}.jpg`,
    images: Array.from({ length: faker.number.int({ min: 2, max: 5 }) }, () => `/images/pensions/pension${faker.number.int({ min: 1, max: 10 })}.jpg`),
});

const createRandomCafe = () => ({
    name: `ì¹´í˜ ${faker.company.name()}`,
    address: faker.location.streetAddress(),
    phone: faker.phone.number(),
    description: faker.lorem.sentence(),
    rating: faker.number.float({ min: 3.5, max: 5.0, precision: 0.1 }),
    image: `/images/cafes/cafe${faker.number.int({ min: 1, max: 10 })}.jpg`,
});

const createRandomHospital = () => ({
    name: `${faker.location.city()} ë™ë¬¼ë³‘ì›`,
    address: faker.location.streetAddress(),
    phone: faker.phone.number(),
    description: faker.lorem.sentence(),
    specialties: faker.helpers.arrayElements(['ë‚´ê³¼', 'ì™¸ê³¼', 'í”¼ë¶€ê³¼', 'ì¹˜ê³¼'], faker.number.int({ min: 1, max: 3 })).join(', '),
    rating: faker.number.float({ min: 3.5, max: 5.0, precision: 0.1 }),
});

const createRandomHotel = () => ({
    name: `${faker.company.name()} í« í˜¸í…”`,
    address: faker.location.streetAddress(),
    price: faker.commerce.price({ min: 50000, max: 150000, dec: 0 }),
    description: faker.lorem.paragraph(),
    rating: faker.number.float({ min: 3.5, max: 5.0, precision: 0.1 }),
    image: `/images/hotels/hotel${faker.number.int({ min: 1, max: 5 })}.jpg`,
    images: Array.from({ length: faker.number.int({ min: 2, max: 5 }) }, () => `/images/hotels/hotel${faker.number.int({ min: 1, max: 5 })}.jpg`),
});

const createRandomGroomingService = () => ({
    name: `${faker.helpers.arrayElement(['í•´í”¼', 'íí‹°', 'í”„ë¦¬í‹°'])} í« ì‚´ë¡±`,
    price: faker.commerce.price({ min: 30000, max: 120000, dec: 0 }),
    description: faker.lorem.sentence(),
    duration: faker.helpers.arrayElement([30, 60, 90, 120]),
    rating: faker.number.float({ min: 3.5, max: 5.0, precision: 0.1 }),
});

const boardKeys = [
    'free-talk', 'pet-showcase', 'info-share', 'qna', 
    'adoption', 'meetups', 'missing', 'reviews'
];

const samplePostData = {
    'free-talk': [
        { title: 'ì˜¤ëŠ˜ ì‚°ì±…í•˜ë‹¤ ë§Œë‚œ ëŒ•ëŒ•ì´ ì¹œêµ¬!', content: 'ì˜¤ëŠ˜ ê³µì›ì—ì„œ ì‚°ì±…í•˜ëŠ”ë°, ì •ë§ ê·€ì—¬ìš´ ë¹„ìˆ‘ ì¹œêµ¬ë¥¼ ë§Œë‚¬ì–´ìš”. ì €í¬ ì§‘ ëŒ•ëŒ•ì´ë‘ í•œì°¸ì„ ê°™ì´ ë›°ì–´ë†€ì•˜ë„¤ìš”. ì—¬ëŸ¬ë¶„ë„ ì˜¤ëŠ˜ ë°˜ë ¤ê²¬ê³¼ ì¦ê±°ìš´ ì‹œê°„ ë³´ë‚´ì…¨ë‚˜ìš”?' },
        { title: 'ê³ ì–‘ì´ë“¤ì€ ì™œ ìƒìë¥¼ ì¢‹ì•„í• ê¹Œìš”?', content: 'ìƒˆë¡œ ì‚° ìº£íƒ€ì›Œë³´ë‹¤ íƒë°° ìƒìë¥¼ ë” ì¢‹ì•„í•˜ëŠ” ìš°ë¦¬ ëƒ¥ì´... ì´ìœ ê°€ ë­˜ê¹Œìš”? ë‹¤ë“¤ ê³µê°í•˜ì‹œì£ ? ğŸ¤£' },
        { title: 'ë‹¤ë“¤ ë°˜ë ¤ë™ë¬¼ ì´ë¦„ì€ ì–´ë–»ê²Œ ì§€ìœ¼ì…¨ì–´ìš”?', content: 'ì €í¬ ì§‘ ì•„ì´ ì´ë¦„ì€ "ë³´ë¦¬"ì¸ë°, ì²˜ìŒ ë°ë ¤ì™”ì„ ë•Œ ë³´ë¦¬ì°¨ ìƒ‰ê¹”ì´ë¼ ê·¸ë ‡ê²Œ ì§€ì—ˆì–´ìš”. ë‹¤ë“¤ ì–´ë–¤ íŠ¹ë³„í•œ ì˜ë¯¸ê°€ ìˆëŠ”ì§€ ê¶ê¸ˆí•´ìš”!' },
        { title: 'ë°˜ë ¤ë™ë¬¼ í‚¤ìš°ë©´ì„œ ê°€ì¥ í–‰ë³µí–ˆë˜ ìˆœê°„ì€?', content: 'ì €ëŠ” í‡´ê·¼í•˜ê³  ì§‘ì— ì™”ì„ ë•Œ, ê¼¬ë¦¬ì¹˜ë©° ë°˜ê²¨ì£¼ëŠ” ëª¨ìŠµì„ ë³¼ ë•Œê°€ ê°€ì¥ í–‰ë³µí•´ìš”. ì—¬ëŸ¬ë¶„ì˜ í–‰ë³µí•œ ìˆœê°„ë„ ê³µìœ í•´ì£¼ì„¸ìš”!' },
        { title: 'ê°•ì•„ì§€ë‘ ê³ ì–‘ì´ ê°™ì´ í‚¤ìš°ì‹œëŠ” ë¶„ ê³„ì‹ ê°€ìš”?', content: 'ë‘˜ì§¸ë¡œ ê³ ì–‘ì´ë¥¼ ë°ë ¤ì˜¤ê³  ì‹¶ì€ë°, ì´ë¯¸ ìˆëŠ” ê°•ì•„ì§€ë‘ ì˜ ì§€ë‚¼ ìˆ˜ ìˆì„ì§€ ê±±ì •ì´ì—ìš”. ê²½í—˜ ìˆìœ¼ì‹  ë¶„ë“¤ì˜ ì¡°ì–¸ì„ êµ¬í•©ë‹ˆë‹¤.' }
    ],
    'pet-showcase': [
        { title: 'ì €í¬ ì§‘ ëƒ¥ì´ ìëŠ” ëª¨ìŠµ ì¢€ ë³´ì„¸ìš”... ì‹¬ì¿µì£¼ì˜', content: 'ì„¸ìƒ í‰í™”ë¡­ê²Œ ìëŠ” ëª¨ìŠµì´ ë„ˆë¬´ ì‚¬ë‘ìŠ¤ëŸ¬ì›Œì„œ ê³µìœ í•©ë‹ˆë‹¤. ì´ ë§›ì— ì§‘ì‚¬í•©ë‹ˆë‹¤.' },
        { title: 'ì¸ìƒ ì²« ë¯¸ìš©! ê³°ëŒì´ì»· ì„±ê³µí–ˆì–´ìš”', content: 'ë°°ëƒ‡ë¯¸ìš©ìœ¼ë¡œ ê³°ëŒì´ì»· í–ˆëŠ”ë° ë„ˆë¬´ ê·€ì—¬ì›Œì„œ ê¸°ì ˆ... ì‚¬ì§„ ë°±ë§Œì¥ ì°ì—ˆì–´ìš”.' },
        { title: 'ìƒˆë¡œ ì‚° ì¥ë‚œê°ì— ëŒ€í•œ ê²©í•œ ë°˜ì‘', content: 'ìº£ë‹¢ ì¿ ì…˜ì„ ì‚¬ì¤¬ë”ë‹ˆ ì•„ì£¼ ë‚œë¦¬ê°€ ë‚¬ë„¤ìš”. ì´ë ‡ê²Œ ì¢‹ì•„í•  ì¤„ì´ì•¼!' },
        { title: 'ì‚°ì±…í•˜ë‹¤ê°€ ì¸ìƒìƒ· ê±´ì¡ŒìŠµë‹ˆë‹¤', content: 'í•´ì§ˆë…˜ ê³µì›ì—ì„œ ì°ì€ ì‚¬ì§„ì¸ë°, ì™„ì „ ëª¨ë¸ ê°™ì§€ ì•Šë‚˜ìš”? (íŒ”ë¶ˆì¶œ ë§ìŠµë‹ˆë‹¤)' },
        { title: 'ìˆ¨ë§‰íˆëŠ” ë’¤íƒœ... ì¹˜ëª…ì ì¸ ì‹ë¹µ ê¶ë‘¥ì´', content: 'ì‹ë¹µ êµ½ê³  ìˆëŠ” ë’·ëª¨ìŠµì´ ë„ˆë¬´ ë™ê¸€ë™ê¸€ ê·€ì—¬ì›Œì„œ ì•ˆ ì°ì„ ìˆ˜ê°€ ì—†ì—ˆì–´ìš”.' }
    ],
    'info-share': [
        { title: 'ê°•ì•„ì§€ ìŠ¬ê°œê³¨ íƒˆêµ¬ì— ì¢‹ì€ ì˜ì–‘ì œ ì¶”ì²œ', content: 'ì €í¬ ì•„ì´ê°€ ìŠ¬ê°œê³¨ì´ ì•ˆ ì¢‹ì•„ì„œ ì˜ì–‘ì œë¥¼ ê¾¸ì¤€íˆ ë¨¹ì´ê³  ìˆëŠ”ë°, íš¨ê³¼ ë´¤ë˜ ì œí’ˆë“¤ ì •ë³´ ê³µìœ í•©ë‹ˆë‹¤.' },
        { title: 'ì—¬ë¦„ì²  ê³ ì–‘ì´ ìŒìˆ˜ëŸ‰ ëŠ˜ë¦¬ëŠ” ê¿€íŒ!', content: 'ë¬¼ì„ ì˜ ì•ˆ ë§ˆì‹œëŠ” ëƒ¥ì´ë“¤ì„ ìœ„í•´ ì œê°€ ì‚¬ìš©í•˜ëŠ” ë°©ë²• ëª‡ ê°€ì§€ë¥¼ ê³µìœ í•´ë´ìš”. ì¸„ë¥´ì— ë¬¼ íƒ€ì£¼ê¸°, ë¶„ìˆ˜ëŒ€ ì„¤ì¹˜ ë“±ë“±...' },
        { title: 'ì„œìš¸ ê·¼êµ ì• ê²¬ë™ë°˜ ê°€ëŠ¥í•œ ì‹ë‹¹ ë¦¬ìŠ¤íŠ¸', content: 'ì£¼ë§ì— ê°•ì•„ì§€ë‘ ê°™ì´ ê°ˆ ìˆ˜ ìˆëŠ” ì‹ë‹¹ë“¤ ë¦¬ìŠ¤íŠ¸ì—… í•´ë´¤ì–´ìš”. íŒŒìŠ¤íƒ€, ë°”ë² í ë“± ì¢…ë¥˜ë³„ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.' },
        { title: 'ê³ ì–‘ì´ í™”ì¥ì‹¤ ëª¨ë˜ ìœ ëª©ë¯¼ ë“œë””ì–´ ì •ì°©í•©ë‹ˆë‹¤', content: 'ë¨¼ì§€ ë‚ ë¦¼ ì ê³ , ì‘ê³ ë ¥ ì¢‹ê³ , íƒˆì·¨ë ¥ê¹Œì§€ ì¢‹ì€ ëª¨ë˜ ë“œë””ì–´ ì°¾ì•˜ì–´ìš”. OOOO ì œí’ˆ ê°•ì¶”í•©ë‹ˆë‹¤.' },
        { title: 'ê°•ì•„ì§€ ë¬¸ì œí–‰ë™, ì§–ìŒ í›ˆë ¨ ì„±ê³µ í›„ê¸°', content: 'ì´ˆì¸ì¢… ì†Œë¦¬ì— ë„ˆë¬´ ì§–ì–´ì„œ ê³ ë¯¼ì´ ë§ì•˜ëŠ”ë°, í›ˆë ¨ì‚¬ë‹˜ ë„ì›€ê³¼ ê¾¸ì¤€í•œ ë…¸ë ¥ìœ¼ë¡œ ë§ì´ ì¢‹ì•„ì¡Œì–´ìš”. ì œ ê²½í—˜ë‹´ ê³µìœ í•©ë‹ˆë‹¤.' }
    ],
    'qna': [
        { title: 'ê°•ì•„ì§€ê°€ ê°‘ìê¸° ì‚¬ë£Œë¥¼ ì•ˆ ë¨¹ì–´ìš”. ì™œ ê·¸ëŸ´ê¹Œìš”?', content: 'ì–´ì œê¹Œì§€ë§Œ í•´ë„ ì˜ ë¨¹ë˜ ì‚¬ë£Œë¥¼ ì˜¤ëŠ˜ ì•„ì¹¨ë¶€í„° ê°‘ìê¸° ì•ˆ ë¨¹ë„¤ìš”. ê°„ì‹ì€ ì˜ ë°›ì•„ë¨¹ëŠ”ë°... ì–´ë”” ì•„í”ˆ ê±¸ê¹Œìš”?' },
        { title: 'ê³ ì–‘ì´ê°€ ìê¾¸ êµ¬í† ë¥¼ í•˜ëŠ”ë° ë³‘ì›ì— ê°€ë´ì•¼ í• ê¹Œìš”?', content: 'í—¤ì–´ë³¼ í† ê°€ ì•„ë‹ˆë¼ ë…¸ë€ìƒ‰ í† ë¥¼ ì¼ì£¼ì¼ì— ë‘ì„¸ ë²ˆ ì •ë„ í•´ìš”. ë¹„ìŠ·í•œ ê²½í—˜ ìˆìœ¼ì‹  ì§‘ì‚¬ë‹˜ë“¤ ê³„ì‹ ê°€ìš”? ë³‘ì›ì— ê°€ë´ì•¼ í•  ìˆ˜ì¤€ì¸ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.' },
        { title: 'ì´ì œ 3ê°œì›” ëœ í¼í”¼ì¸ë°, ì˜ˆë°©ì ‘ì¢…ì€ ì–¸ì œë¶€í„° ì‹œì‘í•´ì•¼ í•˜ë‚˜ìš”?', content: 'ì´ì œ ë§‰ ë°ë ¤ì˜¨ ì§€ ì¼ì£¼ì¼ ëì–´ìš”. ì¢…í•©ë°±ì‹ ì€ ì–¸ì œë¶€í„° ë§ì¶”ëŠ” ê²Œ ì¢‹ì€ê°€ìš”? ë™ë¬¼ë³‘ì› ê°€ê¸° ì „ì— ë¯¸ë¦¬ ì•Œê³  ì‹¶ì–´ì„œ ì§ˆë¬¸í•©ë‹ˆë‹¤.' },
        { title: 'ì‚°ì±…í•  ë•Œ ë„ˆë¬´ í¥ë¶„í•´ì„œ ì¤„ì„ ë‹¹ê¸°ëŠ”ë° ì–´ë–»ê²Œ í›ˆë ¨í•´ì•¼ í• ê¹Œìš”?', content: 'ì‚°ì±…ë§Œ ë‚˜ê°€ë©´ ë„ˆë¬´ ì¢‹ì•„ì„œ ì•ìœ¼ë¡œ íŠ€ì–´ë‚˜ê°€ë ¤ê³  í•´ìš”. ëª©ì¤„ì„ í•´ë„ ì†Œìš©ì´ ì—†ëŠ”ë°, ì¢‹ì€ í›ˆë ¨ ë°©ë²•ì´ ìˆì„ê¹Œìš”?' },
        { title: 'ê³ ì–‘ì´ ë°œí†±ì€ ì–¼ë§ˆë‚˜ ìì£¼ ê¹ì•„ì¤˜ì•¼ í•˜ë‚˜ìš”?', content: 'ì €í¬ ëƒ¥ì´ê°€ ë°œí†± ê¹ëŠ” ê±¸ ë„ˆë¬´ ì‹«ì–´í•´ì„œ ê³ ë¯¼ì´ì—ìš”. ë‹¤ë“¤ ì–¼ë§ˆë‚˜ ìì£¼ ê´€ë¦¬í•´ì£¼ì‹œëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.' }
    ],
    'adoption': [
        { title: '[ì„œìš¸/ë¬´ë£Œ] ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê°•ì•„ì§€ ìš¸íƒ€ë¦¬ ë‚˜ëˆ”í•©ë‹ˆë‹¤.', content: 'ì €í¬ ì•„ì´ê°€ ì´ì œ ë‹¤ ì»¤ì„œ ì“°ì§€ ì•ŠëŠ” ìš¸íƒ€ë¦¬ë¥¼ ë‚˜ëˆ”í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ìƒíƒœëŠ” ê¹¨ë—í•˜ê³ , ì§ì ‘ ê°€ì§€ëŸ¬ ì˜¤ì…”ì•¼ í•´ìš”. í•„ìš”í•˜ì‹  ë¶„ ì—°ë½ì£¼ì„¸ìš”.' },
        { title: '[ê²½ê¸°/ì±…ì„ë¶„ì–‘] ì‚¬ëŒì„ ë„ˆë¬´ ì¢‹ì•„í•˜ëŠ” ì• êµëƒ¥ì´ì˜ ê°€ì¡±ì„ ì°¾ìŠµë‹ˆë‹¤.', content: 'ì‚¬ì •ì´ ìƒê²¨ ë” ì´ìƒ í‚¤ìš°ì§€ ëª»í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 1ì‚´ ëœ ì½”ìˆ ë‚¨ì•„ì´ê³ , ì¤‘ì„±í™” ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ì‚¬ë‘ìœ¼ë¡œ í’ˆì–´ì£¼ì‹¤ ê°€ì¡±ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.' },
        { title: '[ë¶€ì‚°/ë¬´ë£Œ] ê³ ì–‘ì´ ìº£íƒ€ì›Œ ë“œë¦¼í•´ìš”!', content: 'ìƒˆ ìº£íƒ€ì›Œë¥¼ ì‚¬ë©´ì„œ ê¸°ì¡´ì— ì“°ë˜ ì œí’ˆì„ ë“œë¦¼í•©ë‹ˆë‹¤. ì‚¬ìš©ê°ì€ ì¢€ ìˆì§€ë§Œ íŠ¼íŠ¼í•´ìš”. SUV ì°¨ëŸ‰ì´ ìˆìœ¼ì…”ì•¼ ê°€ì ¸ê°€ì‹¤ ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.' },
        { title: '[ëŒ€êµ¬/ì±…ì„ë¶„ì–‘] ê² ë§ì§€ë§Œ ìˆœí•œ ì‹œì¸„ ì™•ìë‹˜ì…ë‹ˆë‹¤.', content: 'êµ¬ì¡° í›„ ì„ì‹œë³´í˜¸ ì¤‘ì¸ ì•„ì´ì…ë‹ˆë‹¤. ë‚¯ì„ ì¢€ ê°€ë¦¬ì§€ë§Œ ë§ˆìŒì„ ì—´ë©´ í•œì—†ëŠ” ì• êµìŸì´ì—ìš”. ì‚¬ìƒì¶© ê²€ì‚¬ ë° ì ‘ì¢… ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.' },
        { title: '[ë‚˜ëˆ”] ìœ í†µê¸°í•œ ì„ë°•í•œ ê°•ì•„ì§€ ê°„ì‹ ë‚˜ëˆ”í•©ë‹ˆë‹¤.', content: 'ì‹¤ìˆ˜ë¡œ ë„ˆë¬´ ë§ì´ ì£¼ë¬¸í•´ì„œ... ìœ í†µê¸°í•œì´ í•œ ë‹¬ ì •ë„ ë‚¨ì€ ê°„ì‹ì…ë‹ˆë‹¤. ì–‘ì´ ë§ìœ¼ë‹ˆ ì—¬ëŸ¬ ì•„ì´ í‚¤ìš°ì‹œëŠ” ë¶„ì´ ê°€ì ¸ê°€ì‹œë©´ ì¢‹ê² ì–´ìš”.' }
    ],
    'meetups': [
        { title: 'ì´ë²ˆì£¼ í† ìš”ì¼, ì„œìš¸ìˆ²ì—ì„œ ì‚°ì±… ë²ˆê°œ í•˜ì‹¤ ë¶„!', content: 'ë‚ ì”¨ë„ ì¢‹ì€ë° ê°™ì´ ì‚°ì±…í•´ìš”! 2ì‚´ ë§í‹°ì¦ˆ í‚¤ìš°ê³  ìˆìŠµë‹ˆë‹¤. ì†Œí˜•ê²¬ ì¹œêµ¬ë“¤ì´ë©´ ë” ì¢‹ì„ ê²ƒ ê°™ì•„ìš”. ì˜¤í›„ 3ì‹œì¯¤ ì–´ë– ì„¸ìš”?' },
        { title: 'ë¶€ì‚° ë¹„ìˆ‘ ëª¨ì„ (ë¶€ë¹„ìˆ‘) ì‹ ì…íšŒì› ëª¨ì§‘í•©ë‹ˆë‹¤.', content: 'ë¶€ì‚°/ê²½ë‚¨ ì§€ì—­ ë¹„ìˆ‘ë“¤ì˜ ì •ê¸° ëª¨ì„ì…ë‹ˆë‹¤. í•œ ë‹¬ì— í•œ ë²ˆ ì• ê²¬ìš´ë™ì¥ì—ì„œ ëª¨ì—¬ì„œ ì‹ ë‚˜ê²Œ ë†€ì•„ìš”! ê´€ì‹¬ ìˆìœ¼ì‹  ë¶„ë“¤ì€ ëŒ“ê¸€ ë‚¨ê²¨ì£¼ì„¸ìš”.' },
        { title: 'ëŒ€ì „ ì›°ì‹œì½”ê¸° í‚¤ìš°ì‹œëŠ” ë¶„ë“¤~ ì£¼ë§ì— ë‚¨ë¬¸ê´‘ì¥ ì–´ë– ì„¸ìš”?', content: 'ì‹ë¹µ ê¶ë‘¥ì´ë“¤ ëª¨ì—¬ë¼! ì´ë²ˆ ì£¼ ì¼ìš”ì¼ ì˜¤í›„ì— ë‚¨ë¬¸ê´‘ì¥ì—ì„œ ê°™ì´ ë›°ì–´ë†€ì•„ìš”. ì €í¬ ì§‘ ì½”ê¸°ëŠ” 4ì‚´ì…ë‹ˆë‹¤.' },
        { title: 'ì¸ì²œ ì†Œë˜ìŠµì§€ìƒíƒœê³µì› ê°™ì´ ê°€ì‹¤ ë¶„ ì°¾ì•„ìš”.', content: 'ì£¼ë§ì— ì°¨ ê°€ì§€ê³  ì†Œë˜ìŠµì§€ìƒíƒœê³µì› ê°€ë ¤ê³  í•˜ëŠ”ë°, ê°™ì´ ì¹´í’€í•´ì„œ ê°€ì‹¤ ë¶„ ìˆì„ê¹Œìš”? ì €í¬ëŠ” í‘¸ë“¤ 2ë§ˆë¦¬ í‚¤ì›ë‹ˆë‹¤.' },
        { title: 'ê³ ì–‘ì´ ì¹´í˜ì—ì„œ ì§‘ì‚¬ë‹˜ë“¤ ì •ëª¨ í•œë²ˆ í• ê¹Œìš”?', content: 'ê°•ì•„ì§€ ëª¨ì„ì€ ë§ì€ë° ê³ ì–‘ì´ ëª¨ì„ì€ ë³„ë¡œ ì—†ë„¤ìš”. ë‹¤ ê°™ì´ ê³ ì–‘ì´ ì¹´í˜ ê°€ì„œ ì •ë³´ ê³µìœ ë„ í•˜ê³  ìˆ˜ë‹¤ë„ ë–¨ì–´ìš”! ì›í•˜ëŠ” ì§€ì—­ íˆ¬í‘œ ë°›ìŠµë‹ˆë‹¤.' }
    ],
    'missing': [
        { title: '[ì°¾ìŠµë‹ˆë‹¤] ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ì—ì„œ ê°ˆìƒ‰ í‘¸ë“¤ì„ ìƒì–´ë²„ë ¸ìŠµë‹ˆë‹¤.', content: 'ì˜¤ëŠ˜(9/10) ì˜¤í›„ 5ì‹œê²½ ì •ìë™ ì¹´í˜ê±°ë¦¬ì—ì„œ ì‚°ì±…í•˜ë‹¤ê°€ ë†“ì³¤ìŠµë‹ˆë‹¤. ì´ë¦„ì€ ì´ˆì½”ì´ê³ , 5ì‚´ ìˆ˜ì»·ì…ë‹ˆë‹¤. ë¹¨ê°„ìƒ‰ ëª©ì¤„ì„ í•˜ê³  ìˆì–´ìš”. ë³´ì‹œë©´ ê¼­ ì—°ë½ì£¼ì„¸ìš”.' },
        { title: '[ë³´í˜¸ì¤‘] ì„œìš¸ì‹œ ê°•ì„œêµ¬ í™”ê³¡ë™ì—ì„œ ë…¸ë€ìƒ‰ ê³ ì–‘ì´ë¥¼ ë³´í˜¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.', content: 'ì–´ì œ ì €ë…ë¶€í„° ì €í¬ ì§‘ ì£¼ì°¨ì¥ì—ì„œ ê³„ì† ìš¸ê³  ìˆì–´ì„œ ìš°ì„  ì§‘ìœ¼ë¡œ ë°ë ¤ì™€ ë³´í˜¸ ì¤‘ì…ë‹ˆë‹¤. ì‚¬ëŒ ì†ì„ íƒ€ëŠ” ê±¸ ë³´ë‹ˆ ì§‘ê³ ì–‘ì´ ê°™ì•„ìš”. ì‚¬ì§„ í™•ì¸í•˜ì‹œê³  ì—°ë½ì£¼ì„¸ìš”.' },
        { title: '[ì°¾ì•„ì£¼ì„¸ìš”] ì¸ì²œ ë¶€í‰êµ¬ì—ì„œ ì•µë¬´ìƒˆ(ì½”ë‰´ì–´)ë¥¼ ì°¾ìŠµë‹ˆë‹¤.', content: 'ì°½ë¬¸ ë°©ì¶©ë§ì´ ëš«ë¦° ì‚¬ì´ë¡œ ë‚ ì•„ê°”ìŠµë‹ˆë‹¤. ì´ë¦„ì€ "ë£¨ë¹„"ì´ê³  "ì•ˆë…•"ì´ë¼ê³  ë§í•  ìˆ˜ ìˆì–´ìš”. ë³´ì‹  ë¶„ì€ ê¼­ ì¢€ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ì‚¬ë¡€í•˜ê² ìŠµë‹ˆë‹¤.' },
        { title: '[ì£¼ì¸ì„ ì°¾ìŠµë‹ˆë‹¤] ëŒ€ì „ ìœ ì„±êµ¬ì—ì„œ ë°œê²¬ëœ í—ˆìŠ¤í‚¤ì…ë‹ˆë‹¤.', content: 'íŒŒë€ìƒ‰ ëˆˆì„ ê°€ì§„ í—ˆìŠ¤í‚¤ë¥¼ ì–´ì ¯ë°¤ì— ë°œê²¬í•´ì„œ ë³´í˜¸í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¹©ì€ ì—†ëŠ” ê²ƒ ê°™ì•„ìš”. ì£¼ì¸ì„ ì• íƒ€ê²Œ ì°¾ê³  ìˆìŠµë‹ˆë‹¤.' },
        { title: '[ì°¾ìŠµë‹ˆë‹¤] ì €í¬ ì§‘ ë½€ì‚ë¥¼ ë³´ì‹  ë¶„ ì—†ë‚˜ìš”? (ì „ë‹¨ì§€ ì²¨ë¶€)', content: 'ì¼ì£¼ì¼ ì§¸ ì§‘ì— ë“¤ì–´ì˜¤ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤. í°ìƒ‰ ë§í‹°ì¦ˆì´ê³ , ê²ì´ ë§ìŠµë‹ˆë‹¤. ì „ë‹¨ì§€ ì‚¬ì§„ ë³´ì‹œê³  ë¹„ìŠ·í•œ ì•„ì´ë¥¼ ë³´ì‹œë©´ ê¼­ ì—°ë½ ë¶€íƒë“œë¦½ë‹ˆë‹¤.' }
    ],
    'reviews': [
        { title: 'ê°€í‰ ì• ê²¬ë™ë°˜ íœì…˜ "í«í¬ë ˆìŠ¤íŠ¸" ì™„ì „ ê°•ì¶”í•´ìš”!', content: 'ê°œë³„ ìš´ë™ì¥ë„ ë„“ê³ , ìˆ˜ì˜ì¥ ë¬¼ë„ ê¹¨ë—í•˜ê³ , ë£¸ ì»¨ë””ì…˜ë„ ìµœê³ ì˜€ì–´ìš”. ë°”ë² íë„ ê°œë³„ì´ë¼ í¸í•˜ê²Œ ë¨¹ì—ˆë„¤ìš”. ì¬ë°©ë¬¸ ì˜ì‚¬ 200%ì…ë‹ˆë‹¤.' },
        { title: 'ì œì£¼ë„ ì• ê²¬ë™ë°˜ ì¹´í˜ "ëŒ•ëŒ•ë‹¹" ì†”ì§ í›„ê¸°', content: 'ì¸í…Œë¦¬ì–´ë„ ì˜ˆì˜ê³  í¬í† ì¡´ë„ ë§ì•„ì„œ ì¢‹ì•˜ì–´ìš”. ê°•ì•„ì§€ìš© ë©”ë‰´ë„ ë”°ë¡œ ìˆì–´ì„œ ê°™ì´ ì¦ê¸¸ ìˆ˜ ìˆì—ˆë„¤ìš”. ë‹¤ë§Œ ì£¼ë§ì—ëŠ” ì‚¬ëŒì´ ë„ˆë¬´ ë§ì•„ì„œ ì°¸ê³ í•˜ì„¸ìš”.' },
        { title: 'ì„œìš¸ìˆ² ê·¼ì²˜ ì• ê²¬ë™ë°˜ ì‹ë‹¹ "ë©ìŠë­" ë‹¤ë…€ì™”ì–´ìš”.', content: 'ì•¼ì™¸ í…Œë¼ìŠ¤ ìë¦¬ê°€ ìˆì–´ì„œ ê°•ì•„ì§€ë‘ ê°™ì´ ì‹ì‚¬í•˜ê¸° ì¢‹ì•˜ì–´ìš”. ìŒì‹ë„ ë§›ìˆê³  ì§ì›ë¶„ë“¤ë„ ì¹œì ˆí•˜ì…¨ìŠµë‹ˆë‹¤. ê°•ì•„ì§€ ë¬¼ê·¸ë¦‡ë„ ì±™ê²¨ì£¼ì‹œëŠ” ì„¼ìŠ¤!' },
        { title: 'ê°•ë¦‰ ì• ê²¬ ì „ìš© í•´ìˆ˜ìš•ì¥, ì•ˆëª©í•´ë³€ í›„ê¸°', content: 'ê°•ì•„ì§€ë“¤ì´ë‘ ëˆˆì¹˜ ì•ˆ ë³´ê³  ë§ˆìŒê» ìˆ˜ì˜í•  ìˆ˜ ìˆì–´ì„œ ë„ˆë¬´ ì¢‹ì•˜ì–´ìš”. ì£¼ë³€ì— ê°„ë‹¨íˆ ì”»ê¸¸ ìˆ˜ ìˆëŠ” ì‹œì„¤ë„ ìˆì–´ì„œ í¸ë¦¬í–ˆìŠµë‹ˆë‹¤.' },
        { title: 'í•˜ë‚¨ ìŠ¤íƒ€í•„ë“œ, ë°˜ë ¤ê²¬ ë™ë°˜ ì‡¼í•‘ í›„ê¸°!', content: 'ìœ ëª¨ì°¨ë‚˜ ì¼€ì´ì§€ ì´ìš©í•˜ë©´ ëŒ€ë¶€ë¶„ì˜ ë§¤ì¥ì— ë™ë°˜ ì¶œì…ì´ ê°€ëŠ¥í•´ì„œ ì¢‹ì•˜ì–´ìš”. í« ì „ìš© í¸ì˜ì‹œì„¤ë„ ì˜ ë˜ì–´ìˆì–´ì„œ ì‡¼í•‘í•˜ê¸° í¸í–ˆìŠµë‹ˆë‹¤.' }
    ]
};

const createRandomPost = (userId) => {
    const boardKey = faker.helpers.arrayElement(boardKeys);
    const sampleData = faker.helpers.arrayElement(samplePostData[boardKey]);

    return {
        title: sampleData.title,
        content: sampleData.content,
        authorId: userId,
        boardKey: boardKey,
        views: faker.number.int({ min: 0, max: 1000 }),
        likes: faker.number.int({ min: 0, max: 200 }),
    };
}; 

const runMigrations = async () => {
    try {
        await sequelize.sync({ alter: true });
        console.log('ë°ì´í„°ë² ì´ìŠ¤ ë™ê¸°í™” ì™„ë£Œ.');

        const NUM_USERS = 20;
        const NUM_POSTS_PER_BOARD = 5;
        const TOTAL_POSTS = boardKeys.length * NUM_POSTS_PER_BOARD;

        // --- ê¸°ë³¸ ê´€ë¦¬ì ë° ì‚¬ìš©ì ìƒì„± ---
        console.log('ê¸°ë³¸ ì‚¬ìš©ì ìƒì„± ì¤‘...');
        const adminPassword = await bcrypt.hash('admin123', 10);
        await AdminUser.upsert({ id: 1, username: 'admin', password: adminPassword, email: 'admin@petpotal.com' });

        const usersData = [];
        for (let i = 0; i < NUM_USERS; i++) {
            usersData.push(await createRandomUser(i));
        }
        await User.bulkCreate(usersData, { ignoreDuplicates: true });
        console.log('ê¸°ë³¸ ì‚¬ìš©ì ìƒì„± ì™„ë£Œ.');

        const users = await User.findAll();
        const userIds = users.map(u => u.id);

        // --- ì¹´íƒˆë¡œê·¸ ë°ì´í„° ìƒì„± ---
        const catalogs = [
            { name: 'ë°˜ë ¤ìš©í’ˆ', model: Product, generator: createRandomProduct },
            { name: 'ë™ë°˜ìˆ™ì†Œ', model: Accommodation, generator: createRandomAccommodation },
            { name: 'ì¹´í˜', model: Cafe, generator: createRandomCafe },
            { name: 'ë³‘ì›', model: Hospital, generator: createRandomHospital },
            { name: 'í˜¸í…”', model: Hotel, generator: createRandomHotel },
            { name: 'ë¯¸ìš©', model: GroomingService, generator: createRandomGroomingService },
        ];

        for (const catalog of catalogs) {
            console.log(`${catalog.name} ë°ì´í„° ìƒì„± ì¤‘...`);
            const existingCatalogCount = await catalog.model.count();
            if (existingCatalogCount < NUM_USERS) {
                const data = Array.from({ length: NUM_USERS - existingCatalogCount }, catalog.generator);
                await catalog.model.bulkCreate(data);
            }
            console.log(`${catalog.name} ë°ì´í„° ìƒì„± ì™„ë£Œ.`);
        }

        // --- ì»¤ë®¤ë‹ˆí‹° ë°ì´í„° ìƒì„± ---
        console.log('ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ ìƒì„± ì¤‘...');
        const existingPostCount = await CommunityPost.count();
        if (existingPostCount < TOTAL_POSTS) {
            const postsData = Array.from({ length: TOTAL_POSTS - existingPostCount }, () => createRandomPost(faker.helpers.arrayElement(userIds)));
            await CommunityPost.bulkCreate(postsData);
        }
        console.log('ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ ìƒì„± ì™„ë£Œ.');


        console.log('\nğŸ‰ ëª¨ë“  ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');

    } catch (error) {
        console.error('ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
    } finally {
        await sequelize.close();
    }
};

runMigrations();
